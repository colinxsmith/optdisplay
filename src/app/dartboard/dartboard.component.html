<div class="tipper"></div>
<svg [attr.width]="ww" [attr.height]="hh">
    <text class="heading" y="25" [attr.x]="ww/2">{{title}}</text>
    <g [attr.transform]="translatehack(ww/2,hh/2)">
        <ng-container *ngIf="picdata.length">
            <ng-container *ngFor="let d of picdata;let i=index">
                <g (mouseenter)="mouser($event,i,d,true)" (mouseleave)="mouser($event,i,d,false)"
                    (click)="clicker($event,d)">
                    <path id="face" [attr.d]="arcPath(d)"
                        [style.fill]="esgColour[d.data.name]?esgColour[d.data.name]:d.data.name===''?'white':esgColour[d.parent.data.name]?esgColour[d.parent.data.name]:(d.parent.parent?esgColour[d.parent.parent.data.name]:'green')"></path>
                    <text id="face" [attr.class]="d.depth<maxdepth?'dd':''"
                    y="0.4em"
                        [style.visibility]="(arcCentroid(d)[1]<=6&&abshack(arcCentroid(d)[0])<1e-8)?'hidden':'visible'"
                        [attr.transform]="translatehack(arcCentroid(d)[0],arcCentroid(d)[1],(abshack(arcCentroid(d)[0])<1e-8&&arcCentroid(d)[1]>5?((d.children && d.children.length)?180:90):arcCentroid(d)[0]<0?90:-90)+x((d.x0+d.x1)/2)/piover180)">{{d.data.name}}</text>
                </g>
            </ng-container>
        </ng-container>
    </g>
</svg>