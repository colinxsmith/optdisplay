<svg [attr.width]="R" [attr.height]="R" x="0" y="0" class="radar">
<defs>
<filter id="glow">
<feGaussianBlur stdDeviation="25" result="coloredBlur"></feGaussianBlur>
<feMerge>
<feMergeNode in="coloredBlur"></feMergeNode>
<feMergeNode in="SourceGraphic"></feMergeNode>
</feMerge>
</filter>
</defs><g [attr.transform]="translatehack(R*0.5,R*0.5)">



<ng-container *ngFor="let r of levelsRange;">
<circle class="gridCircle" [attr.r]="circScale(r)"></circle>
<text class="axisRadar" y="0.5em" [attr.transform]="translatehack(0,-circScale(r))">{{percentFormat(circVal(r))}}</text>
</ng-container>

<ng-container *ngIf="pMin<0">
<path class="gridZero" [attr.d]="arcZ(1)"></path>
</ng-container>

<ng-container *ngFor="let asset of portfolios[0].port;let i=index">
<line class="line" x1="0" y1="0" [attr.x2]="rScale(pMax*1.13)*cCos(angleScale(i)-PI/2)"  [attr.y2]="rScale(pMax*1.13)*cSin(angleScale(i)-PI/2)"></line>
<text class="legendRadar" [attr.y]="rScale(pMax)*cSin(angleScale(i)-PI/2)<0?rScale(pMax)*cSin(angleScale(i)-PI/2):rScale(pMax)*cSin(angleScale(i)-PI/2)*1.1">
<ng-container *ngFor="let line of [0,1,2,3];">
<tspan [attr.x]="rScale(pMax*1.1)*cCos(angleScale(i)-PI/2)" dx="-9.5%" [attr.dy]="line===0?'-0.8em':'0.8em'">{{wrapString(asset.axis,wraplength)[line]}}</tspan>
</ng-container>
</text>
</ng-container>

<ng-container *ngFor="let port of portfolios;let i=index">
<text 
[style.fill]="port.colour" class="portlabs" x="-0.5em" [attr.transform]="translatehack(radius*1.015,-radius*0.95+squareSize*i)" >{{port.name}}</text>
<path 
[style.fill]="port.colour" class="radarArea" (mouseenter)="areaChoose(true,i)" (mouseleave)="areaChoose(false,i)" 
[attr.d]="(pMin<0?radarLine(port.port)+radarLineZ(port.port):radarLine(port.port))+blobChooser(i,radius*1.015,-radius*0.95)">
</path>
<path [style.stroke]="port.colour"class="radarStroke"  [attr.d]="radarLine(port.port)">
</path>

<ng-container *ngFor="let asset of port.port;let axis=index">
<circle [attr.id]="'i'+i" [attr.cx]="rScale(asset.value)*cCos(angleScale(axis)-PI/2)" class="radarCircle"
[style.fill]="port.colour"
[attr.cy]="rScale(asset.value)*cSin(angleScale(axis)-PI/2)" r="5" >
</circle>
</ng-container>

</ng-container>
<ng-container *ngFor="let port of portfolios;let i=index">
<ng-container *ngFor="let asset of port.port;let axis=index">
<circle  [attr.id]="'i'+i"[attr.cx]="rScale(asset.value)*cCos(angleScale(axis)-PI/2)" class="radarInvisibleCircle"
[style.fill]="port.colour" (mouseenter)="circleChoose(true,asset,$event,axis,port.colour)" (mouseleave)="circleChoose(false,null,$event,axis)"
[attr.cy]="rScale(asset.value)*cSin(angleScale(axis)-PI/2)" r="10" >
</circle>
</ng-container>

</ng-container>

</g>
</svg>

